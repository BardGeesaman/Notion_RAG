# =============================================================================
# Amprenta RAG - Environment Configuration Example
# =============================================================================
# Copy this file to .env and fill in your values
# Required values are marked with [REQUIRED], others have sensible defaults
#
# In production, most of these are managed via AWS Secrets Manager.
# See docs/SECRETS_MANAGEMENT.md for details.
# =============================================================================

# -----------------------------------------------------------------------------
# Database Configuration [REQUIRED for local development]
# -----------------------------------------------------------------------------
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_password_here
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=amprenta

# Optional: Full database URL (overrides individual components above)
# POSTGRES_URL=postgresql://postgres:password@localhost:5432/amprenta

# Database debugging (set to true for SQL query logging)
POSTGRES_ECHO=false

# -----------------------------------------------------------------------------
# API Keys (Optional for local development)
# -----------------------------------------------------------------------------
# OpenAI - Required for LLM features (RAG, summarization, chat)
OPENAI_API_KEY=sk-...

# Zotero - Required for bibliography and reference management features
ZOTERO_API_KEY=
ZOTERO_LIBRARY_ID=
ZOTERO_LIBRARY_TYPE=user

# GEO/NCBI - Required for public repository ingestion (GEO, PubMed)
GEO_API_KEY=
NCBI_EMAIL=your.email@example.com

# -----------------------------------------------------------------------------
# Feature Flags (All optional, have sensible defaults)
# -----------------------------------------------------------------------------
# Environment designation (dev, staging, prod)
ENVIRONMENT=dev

# Authentication (set to true to disable auth for local development)
DISABLE_AUTH=false

# Debug mode (enables detailed logging and error traces)
DEBUG=false

# Logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Vector backend (pgvector is default, no external dependencies)
VECTOR_BACKEND=pgvector

# Enable Notion synchronization (legacy feature being phased out)
ENABLE_NOTION_SYNC=false

# -----------------------------------------------------------------------------
# Service URLs (for local development)
# -----------------------------------------------------------------------------
# API server configuration
API_HOST=0.0.0.0
API_PORT=8000
API_BASE_URL=http://localhost:8000

# Dashboard configuration
DASHBOARD_HOST=0.0.0.0
DASHBOARD_PORT=8501
DASHBOARD_URL=http://localhost:8501

# CORS origins (comma-separated list for API)
CORS_ORIGINS=http://localhost:8501,http://localhost:3000

# -----------------------------------------------------------------------------
# Background Jobs (Optional - for async processing)
# -----------------------------------------------------------------------------
# Celery/Redis configuration (optional, for background jobs)
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0
CELERY_TASK_ALWAYS_EAGER=false

# Task queue settings
CELERY_WORKER_CONCURRENCY=2
CELERY_TASK_SOFT_TIME_LIMIT=300
CELERY_TASK_TIME_LIMIT=600

# -----------------------------------------------------------------------------
# AWS Configuration (only needed for S3/cloud features)
# -----------------------------------------------------------------------------
# AWS region for services
# AWS_REGION=us-east-1

# AWS credentials (use IAM roles in production)
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=

# S3 bucket for file storage
# S3_BUCKET_NAME=

# -----------------------------------------------------------------------------
# Backup Configuration (Optional)
# -----------------------------------------------------------------------------
# Enable S3 backups
BACKUP_S3_ENABLED=false

# S3 bucket for backups
BACKUP_S3_BUCKET=

# Local backup directory
BACKUP_LOCAL_DIR=./backups

# Backup retention (days)
BACKUP_RETENTION_DAYS=365

# KMS key ID for backup encryption (managed via secrets in production)
# BACKUP_KMS_KEY_ID=

# -----------------------------------------------------------------------------
# Performance and Scaling (Optional)
# -----------------------------------------------------------------------------
# API server workers (for production deployment)
API_WORKERS=1

# Database connection pool settings
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30

# Request timeout settings (seconds)
REQUEST_TIMEOUT=30
SLOW_QUERY_THRESHOLD=1.0

# -----------------------------------------------------------------------------
# Monitoring and Observability (Optional)
# -----------------------------------------------------------------------------
# Enable metrics collection
ENABLE_METRICS=false

# Metrics endpoint
METRICS_PORT=9090

# Health check configuration
HEALTH_CHECK_TIMEOUT=5

# -----------------------------------------------------------------------------
# Notion Integration (Legacy - being phased out)
# Only needed if using Notion sync features
# See docs/SECRETS_INVENTORY.md for complete list
# -----------------------------------------------------------------------------
# Core Notion configuration
# NOTION_API_KEY=

# Notion database IDs (workspace-specific)
# NOTION_PROGRAMS_DB_ID=
# NOTION_EXPERIMENTS_DB_ID=
# NOTION_EXP_DATA_DB_ID=
# NOTION_COMPOUND_FEATURES_DB_ID=
# NOTION_METABOLITE_FEATURES_DB_ID=
# NOTION_PROTEIN_FEATURES_DB_ID=
# NOTION_GENE_FEATURES_DB_ID=
# NOTION_SIGNATURE_DB_ID=
# NOTION_SIGNATURE_COMPONENT_DB_ID=
# NOTION_LIPID_SPECIES_DB_ID=
# NOTION_HTS_CAMPAIGNS_DB_ID=
# NOTION_BIOCHEMICAL_HITS_DB_ID=
# NOTION_PATHWAYS_DB_ID=

# -----------------------------------------------------------------------------
# Development and Testing (Optional)
# -----------------------------------------------------------------------------
# Test database (separate from main database)
TEST_POSTGRES_DB=amprenta_test

# Enable test mode (affects logging and behavior)
TESTING=false

# Pytest configuration
PYTEST_TIMEOUT=300

# Mock external services during testing
MOCK_EXTERNAL_APIS=false

# -----------------------------------------------------------------------------
# Security (Optional)
# -----------------------------------------------------------------------------
# JWT secret key (auto-generated if not provided)
# JWT_SECRET_KEY=

# Session configuration
SESSION_TIMEOUT=3600
SESSION_REFRESH_THRESHOLD=300

# Rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60

# -----------------------------------------------------------------------------
# Docker and Container Configuration (Optional)
# -----------------------------------------------------------------------------
# Container-specific settings
CONTAINER_NAME=amprenta-rag

# Docker network settings
DOCKER_NETWORK=amprenta-network

# Container health check interval
HEALTH_CHECK_INTERVAL=30

# =============================================================================
# Quick Start Checklist:
# 1. Copy this file: cp .env.example .env
# 2. Set POSTGRES_PASSWORD (required)
# 3. Set OPENAI_API_KEY (for LLM features)
# 4. Set NCBI_EMAIL (for GEO queries)
# 5. Start PostgreSQL: docker-compose up -d postgres
# 6. Run migrations: alembic upgrade head
# 7. Start API: uvicorn amprenta_rag.api.main:app --reload
# 8. Start dashboard: streamlit run scripts/dashboard/main.py
# =============================================================================
