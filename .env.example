# =============================================================================
# Amprenta RAG - Environment Configuration Template
# =============================================================================
# Copy this file to .env and fill in your values:
#   cp .env.example .env
#
# Required secrets are marked with [REQUIRED]
# Optional secrets are marked with [OPTIONAL]
# =============================================================================

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# -----------------------------------------------------------------------------
POSTGRES_USER=postgres
POSTGRES_PASSWORD=                    # [REQUIRED] Database password
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=amprenta
POSTGRES_URL=                         # [OPTIONAL] Full connection string override
POSTGRES_ECHO=false

# -----------------------------------------------------------------------------
# API KEYS - External Services
# -----------------------------------------------------------------------------
OPENAI_API_KEY=                       # [REQUIRED] OpenAI API key for LLM features
ZOTERO_API_KEY=                       # [REQUIRED] Zotero API key for bibliography
NOTION_API_KEY=                       # [OPTIONAL] Only if ENABLE_NOTION_SYNC=true
GEO_API_KEY=                          # [OPTIONAL] NCBI GEO API key for higher rate limits

# -----------------------------------------------------------------------------
# AUTHENTICATION & SECURITY
# -----------------------------------------------------------------------------
NCBI_EMAIL=                           # [REQUIRED] Email required by NCBI for API access
SIGNATURE_SECRET_KEY=                 # [REQUIRED] HMAC key for signatures (32+ hex chars)
JWT_SECRET_KEY=                       # [REQUIRED] JWT signing key (32+ hex chars)
DISABLE_AUTH=false                    # Set true for local development

# -----------------------------------------------------------------------------
# ENVIRONMENT
# -----------------------------------------------------------------------------
ENVIRONMENT=dev                       # dev, staging, prod
DEBUG=false
LOG_LEVEL=INFO

# -----------------------------------------------------------------------------
# CORS & API
# -----------------------------------------------------------------------------
CORS_ORIGINS=http://localhost:8501,http://localhost:3000

# -----------------------------------------------------------------------------
# VECTOR DATABASE
# -----------------------------------------------------------------------------
VECTOR_BACKEND=pgvector

# -----------------------------------------------------------------------------
# FEATURE FLAGS
# -----------------------------------------------------------------------------
ENABLE_NOTION_SYNC=false              # [DEPRECATED] Notion sync disabled
ENABLE_DUAL_WRITE=false
USE_POSTGRES_AS_SOT=true
ENABLE_SIGNATURE_SCORING=true
ENABLE_LIPID_MAPPING=true
ENABLE_FEATURE_LINKING=true
ENABLE_LLM_SEMANTIC_EXTRACTION=false
AUTO_LINK_ENABLED=true
AUTO_LINK_MIN_CONFIDENCE=0.8

# -----------------------------------------------------------------------------
# CACHE CONFIGURATION
# -----------------------------------------------------------------------------
FEATURE_CACHE_ENABLED=true
FEATURE_CACHE_TTL=3600
FEATURE_CACHE_TTL_SECONDS=3600
FEATURE_CACHE_MAX_SIZE=1000
FEATURE_CACHE_ENABLE_PERSISTENCE=true
FEATURE_CACHE_DIR=
FEATURE_CACHE_PARALLEL_WORKERS=5

# -----------------------------------------------------------------------------
# FEATURE LINKING
# -----------------------------------------------------------------------------
FEATURE_LINKING_MAX_WORKERS=10
SIGNATURE_OVERLAP_THRESHOLD=0.3

# -----------------------------------------------------------------------------
# BACKUP CONFIGURATION
# -----------------------------------------------------------------------------
BACKUP_S3_ENABLED=false
BACKUP_S3_BUCKET=
BACKUP_LOCAL_DIR=./backups
BACKUP_RETENTION_DAYS=365
BACKUP_KMS_KEY_ID=                    # [OPTIONAL] AWS KMS key for encryption

# -----------------------------------------------------------------------------
# EMAIL CONFIGURATION
# -----------------------------------------------------------------------------
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=                            # [OPTIONAL] SMTP username
SMTP_PASSWORD=                        # [OPTIONAL] SMTP password/app password
FROM_EMAIL=

# -----------------------------------------------------------------------------
# ZOTERO CONFIGURATION
# -----------------------------------------------------------------------------
ZOTERO_LIBRARY_TYPE=user
ZOTERO_LIBRARY_ID=

# -----------------------------------------------------------------------------
# SIGNATURES
# -----------------------------------------------------------------------------
SIGNATURES_DIR=

# -----------------------------------------------------------------------------
# NOTION INTEGRATION IDs [DEPRECATED - Legacy support only]
# -----------------------------------------------------------------------------
# These are only needed if ENABLE_NOTION_SYNC=true (not recommended)
NOTION_EXP_DATA_DB_ID=
NOTION_METABOLITE_FEATURES_DB_ID=
NOTION_PROTEIN_FEATURES_DB_ID=
NOTION_GENE_FEATURES_DB_ID=
NOTION_SIGNATURE_DB_ID=
NOTION_SIGNATURE_COMPONENT_DB_ID=
NOTION_LIPID_SPECIES_DB_ID=
NOTION_PROGRAMS_DB_ID=
NOTION_EXPERIMENTS_DB_ID=
NOTION_COMPOUND_FEATURES_DB_ID=
NOTION_HTS_CAMPAIGNS_DB_ID=
NOTION_BIOCHEMICAL_HITS_DB_ID=
NOTION_PATHWAYS_DB_ID=
