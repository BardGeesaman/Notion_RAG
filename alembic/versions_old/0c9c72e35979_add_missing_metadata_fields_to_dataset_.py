"""Add missing metadata fields to Dataset and Experiment models

Revision ID: 0c9c72e35979
Revises: 80008f433a68
Create Date: 2025-12-04 17:40:16.117570

"""
from alembic import op
import sqlalchemy as sa
from sqlalchemy.dialects import postgresql

# revision identifiers, used by Alembic.
revision = '0c9c72e35979'
down_revision = '80008f433a68'
branch_labels = None
depends_on = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.add_column('datasets', sa.Column('methods', sa.Text(), nullable=True))
    op.add_column('datasets', sa.Column('summary', sa.Text(), nullable=True))
    op.add_column('datasets', sa.Column('results', sa.Text(), nullable=True))
    op.add_column('datasets', sa.Column('conclusions', sa.Text(), nullable=True))
    op.add_column('datasets', sa.Column('dataset_source_type', sa.String(length=100), nullable=True))
    op.add_column('datasets', sa.Column('data_origin', sa.String(length=100), nullable=True))
    op.add_column('experiments', sa.Column('targets', postgresql.ARRAY(sa.String()), nullable=True))
    op.add_column('experiments', sa.Column('modality', postgresql.ARRAY(sa.String()), nullable=True))
    op.add_column('experiments', sa.Column('stage', sa.String(length=100), nullable=True))
    op.add_column('experiments', sa.Column('biomarker_role', postgresql.ARRAY(sa.String()), nullable=True))
    op.add_column('experiments', sa.Column('treatment_arms', postgresql.ARRAY(sa.String()), nullable=True))
    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_column('experiments', 'treatment_arms')
    op.drop_column('experiments', 'biomarker_role')
    op.drop_column('experiments', 'stage')
    op.drop_column('experiments', 'modality')
    op.drop_column('experiments', 'targets')
    op.drop_column('datasets', 'data_origin')
    op.drop_column('datasets', 'dataset_source_type')
    op.drop_column('datasets', 'conclusions')
    op.drop_column('datasets', 'results')
    op.drop_column('datasets', 'summary')
    op.drop_column('datasets', 'methods')
    # ### end Alembic commands ###

